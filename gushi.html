<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¹¿ä¸œé«˜èŒé«˜è€ƒè¯­æ–‡é»˜å†™é—¯å…³ (2025-2008)</title>
    <style>
        :root {
            /* é…è‰²ï¼šæ–°ä¸­å¼é£æ ¼ - ç«¹é’/å¢¨é»‘/çº¸ç™½ */
            --primary: #45b787;      /* ç«¹é’ */
            --primary-dark: #2d8a63; 
            --accent: #f39c12;       /* æé»„ */
            --error: #e74c3c;        /* èƒ­è„‚çº¢ */
            --text-main: #333333;    /* å¢¨è‰² */
            --text-light: #666666;
            --bg-body: #f0f4f3;      /* äº‘æ°´è“ç° */
            --card-bg: rgba(255, 255, 255, 0.96);
            --shadow: 0 8px 24px rgba(69, 183, 135, 0.15);
        }

        body {
            font-family: 'PingFang SC', 'Microsoft YaHei', 'SimHei', sans-serif;
            background: linear-gradient(135deg, #f0f4f3 0%, #eefbf5 100%);
            min-height: 100vh;
            margin: 0;
            padding: 20px;
            color: var(--text-main);
            display: flex;
            justify-content: center;
        }

        .container {
            width: 100%;
            max-width: 900px;
            background: var(--card-bg);
            padding: 40px;
            border-radius: 24px;
            box-shadow: var(--shadow);
            border: 1px solid rgba(255,255,255,0.8);
            position: relative;
            overflow: hidden;
        }

        /* è£…é¥°èƒŒæ™¯å­— */
        .container::before {
            content: "è¯—";
            position: absolute;
            top: -20px;
            right: -20px;
            font-size: 15rem;
            font-family: 'KaiTi', serif;
            color: var(--primary);
            opacity: 0.05;
            z-index: 0;
            pointer-events: none;
        }

        h1 { 
            text-align: center; 
            color: var(--primary-dark); 
            margin-bottom: 30px; 
            font-weight: 800;
            letter-spacing: 2px;
            border-bottom: 2px solid rgba(69, 183, 135, 0.2);
            padding-bottom: 15px;
        }

        /* è¡¨å•åŒºåŸŸ */
        .input-group {
            margin-bottom: 20px;
            position: relative;
        }
        .input-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: var(--text-main);
        }
        .form-control {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #e0e0e0;
            border-radius: 12px;
            font-size: 16px;
            transition: all 0.3s;
            box-sizing: border-box;
            background: #f9f9f9;
        }
        .form-control:focus {
            border-color: var(--primary);
            background: #fff;
            outline: none;
            box-shadow: 0 0 0 3px rgba(69, 183, 135, 0.1);
        }

        /* è¿›åº¦æ¡ */
        .progress-box { margin-bottom: 30px; position: relative; z-index: 1; }
        .level-info { display: flex; justify-content: space-between; margin-bottom: 10px; font-weight: bold; color: var(--primary-dark); }
        .progress-bar-bg { height: 12px; background: #e0e0e0; border-radius: 6px; overflow: hidden; }
        .progress-bar-fill { height: 100%; background: linear-gradient(90deg, var(--primary), #66dec0); width: 0%; transition: width 0.6s cubic-bezier(0.22, 1, 0.36, 1); }

        /* é¢˜ç›®å¡ç‰‡ */
        .question-card {
            background: #fff;
            padding: 25px;
            margin-bottom: 25px;
            border-radius: 16px;
            border: 1px solid #eee;
            box-shadow: 0 4px 12px rgba(0,0,0,0.03);
            transition: transform 0.3s, box-shadow 0.3s;
            position: relative;
            z-index: 1;
        }
        .question-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.06);
        }

        .question-text {
            font-size: 1.2em;
            line-height: 2.2;
            font-family: 'KaiTi', 'æ¥·ä½“', serif; /* ä½¿ç”¨æ¥·ä½“å¢åŠ å¤éŸµ */
            font-weight: 600;
            color: #2c3e50;
        }

        /* å¡«ç©ºè¾“å…¥æ¡† */
        .inline-input {
            border: none;
            border-bottom: 2px solid #bbb;
            background: transparent;
            text-align: center;
            font-family: inherit;
            font-size: 1.05em;
            color: var(--primary-dark);
            width: 200px;
            padding: 0 5px;
            margin: 0 5px;
            outline: none;
            transition: all 0.3s;
        }
        .inline-input:focus { border-bottom-color: var(--primary); background: rgba(69, 183, 135, 0.05); }
        
        .inline-input.correct { 
            border-bottom-color: var(--primary); 
            color: var(--primary); 
            font-weight: bold;
        }
        .inline-input.wrong { 
            border-bottom-color: var(--error); 
            color: var(--error); 
            text-decoration: line-through;
            background: rgba(231, 76, 60, 0.05);
        }

        /* çŠ¶æ€å›¾æ ‡ */
        .status-icon {
            display: inline-block;
            width: 20px;
            margin-left: 5px;
            vertical-align: middle;
        }

        /* ç¡®è®¤æŒ‰é’®ï¼ˆæ¯é¢˜ï¼‰ */
        .btn-confirm-q {
            margin-top: 15px;
            padding: 8px 20px;
            background-color: var(--text-main);
            color: #fff;
            border: none;
            border-radius: 30px;
            cursor: pointer;
            font-size: 14px;
            transition: 0.3s;
            display: inline-block;
        }
        .btn-confirm-q:hover { background-color: #000; transform: scale(1.05); }
        .btn-confirm-q.checked { display: none; } /* ç¡®è®¤åéšè—æŒ‰é’® */

        /* è§£æåŒºåŸŸ */
        .analysis-box {
            margin-top: 20px;
            padding: 15px 20px;
            background: #fdfbf5; /* æ·¡æ·¡çš„ç±³é»„è‰² */
            border-radius: 10px;
            border-left: 4px solid var(--accent);
            display: none; /* é»˜è®¤éšè— */
            animation: slideDown 0.4s ease;
        }
        @keyframes slideDown {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .correct-answer-text {
            color: var(--primary-dark);
            font-weight: bold;
            font-size: 1.1em;
            margin-bottom: 8px;
            font-family: 'KaiTi', serif;
        }

        .memory-tip {
            font-size: 0.95em;
            color: #666;
            background: rgba(243, 156, 18, 0.1);
            padding: 8px 12px;
            border-radius: 6px;
            display: inline-block;
            margin-top: 5px;
        }

        /* åº•éƒ¨å…¨å±€æŒ‰é’® */
        .action-area { text-align: center; margin-top: 40px; padding-top: 20px; border-top: 1px solid #eee; }
        
        .btn {
            padding: 14px 40px;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            font-size: 18px;
            font-weight: bold;
            transition: all 0.3s;
            margin: 10px;
            letter-spacing: 1px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }
        .btn-start { background: var(--primary); color: white; width: 100%; max-width: 400px; }
        .btn-start:hover { background: var(--primary-dark); box-shadow: 0 6px 20px rgba(69, 183, 135, 0.4); }
        
        .btn-submit { background: #34495e; color: white; }
        .btn-next { background: var(--primary); color: white; display: none; }
        .btn-redo { background: var(--accent); color: white; display: none; }

        .section { display: none; }
        .section.active { display: block; animation: fadeIn 0.6s; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        /* ç»“æœå¼¹çª— */
        .result-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.6);
            backdrop-filter: blur(5px);
            display: none;
            justify-content: center; align-items: center; z-index: 1000;
        }
        .result-modal {
            background: white; padding: 40px; border-radius: 20px; text-align: center;
            max-width: 450px; width: 90%; animation: popIn 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            box-shadow: 0 20px 60px rgba(0,0,0,0.2);
        }
        @keyframes popIn { from { transform: scale(0.8); opacity: 0; } to { transform: scale(1); opacity: 1; } }
        
        .score-circle {
            width: 120px; height: 120px;
            border-radius: 50%;
            border: 6px solid var(--primary);
            display: flex; justify-content: center; align-items: center;
            font-size: 3em; font-weight: bold; color: var(--primary);
            margin: 0 auto 20px auto;
        }
        .user-info-display { margin-bottom: 20px; color: #888; font-size: 0.9em; border-bottom: 1px dashed #eee; padding-bottom: 10px; }

    </style>
</head>
<body>

<div class="container">
    <h1>âœ’ï¸ å¹¿ä¸œé«˜èŒé«˜è€ƒè¯­æ–‡é»˜å†™é—¯å…³</h1>

    <div id="setup-section" class="section active">
        <div style="text-align: center; margin-bottom: 30px; color: #666;">
            <p>æ”¶å½• 2008-2025 å¹´çœŸé¢˜åº“ï¼ˆç¬¬äº”å¤§é¢˜å¤è¯—è¡¥å……ï¼‰</p>
        </div>
        
        <div class="input-group">
            <label>ğŸ« ç­çº§</label>
            <input type="text" id="className" class="form-control" placeholder="ä¾‹å¦‚ï¼š23çº§æ•°åª’2ç­">
        </div>
        <div class="input-group">
            <label>ğŸ”¢ å­¦å·</label>
            <input type="text" id="studentId" class="form-control" placeholder="è¯·è¾“å…¥å­¦å·">
        </div>
        <div class="input-group">
            <label>ğŸ‘¤ å§“å</label>
            <input type="text" id="studentName" class="form-control" placeholder="è¯·è¾“å…¥çœŸå®å§“å">
        </div>
        
        <div style="text-align: center; margin-top: 40px;">
            <button class="btn btn-start" onclick="startGame()">å¼€å§‹æŒ‘æˆ˜</button>
        </div>
    </div>

    <div id="game-section" class="section">
        <div class="progress-box">
            <div class="level-info">
                <span id="level-title">ç¬¬ä¸€å…³</span>
                <span id="level-progress">1/18</span>
            </div>
            <div class="progress-bar-bg">
                <div id="progress-fill" class="progress-bar-fill"></div>
            </div>
        </div>

        <div id="questions-area">
            </div>

        <div class="action-area">
            <button class="btn btn-submit" id="submit-level-btn" onclick="finishLevel()">ç»“ç®—æœ¬å…³æˆç»©</button>
            <button class="btn btn-next" id="next-btn" onclick="nextLevel()">è¿›å…¥ä¸‹ä¸€å…³</button>
            <button class="btn btn-redo" id="redo-btn" onclick="loadLevel()">é‡åšæœ¬å…³</button>
        </div>
    </div>
</div>

<div class="result-overlay" id="result-modal">
    <div class="result-modal">
        <div class="user-info-display" id="modal-user-info"></div>
        <h2>æœ¬å…³æˆç»©</h2>
        <div class="score-circle" id="score-val">0</div>
        <p style="font-style: italic; color: #7f8c8d; margin-bottom: 25px;" id="quote-val"></p>
        <button class="btn btn-start" style="width: auto; padding: 10px 40px;" onclick="closeModal()">ç¡®å®š</button>
    </div>
</div>

<script>
// æ•°æ®åº“ (ä¿æŒåŸæ•°æ®ä¸å˜)
const fullDatabase = [
    {
        "year": "2025",
        "qs": [
            { "t": "1. å† è€…äº”å…­äººï¼Œç«¥å­å…­ä¸ƒäººï¼Œ________________ï¼Œé£ä¹èˆé›©ï¼Œ________________ã€‚", "a": "æµ´ä¹æ²‚ï¼Œå’è€Œå½’", "m": "ã€ç”»é¢è”æƒ³ã€‘ä¸€ç¾¤äººæ´—å®Œæ¾¡å¹é£ï¼Œå”±æ­Œå›å®¶ã€‚" },
            { "t": "2. ç©ºå±±æ–°é›¨åï¼Œ________________ã€‚æ˜æœˆæ¾é—´ç…§ï¼Œ________________ã€‚", "a": "å¤©æ°”æ™šæ¥ç§‹ï¼Œæ¸…æ³‰çŸ³ä¸Šæµ", "m": "ã€å¯¹å¶è®°å¿†ã€‘æ˜æœˆå¯¹æ¸…æ³‰ï¼Œæ¾é—´å¯¹çŸ³ä¸Šã€‚" },
            { "t": "3. é•¿å®‰å›æœ›ç»£æˆå †ï¼Œå±±é¡¶åƒé—¨æ¬¡ç¬¬å¼€ã€‚________________ï¼Œ________________ã€‚", "a": "ä¸€éª‘çº¢å°˜å¦ƒå­ç¬‘ï¼Œæ— äººçŸ¥æ˜¯è”ææ¥", "m": "ã€å› æœé€»è¾‘ã€‘å¦ƒå­ç¬‘æ˜¯å› ä¸ºè”ææ¥äº†ã€‚" },
            { "t": "4. ________________ï¼Ÿæ¨æŸ³å²¸ï¼Œæ™“é£æ®‹æœˆã€‚________________ï¼Œåº”æ˜¯è‰¯è¾°å¥½æ™¯è™šè®¾ã€‚", "a": "ä»Šå®µé…’é†’ä½•å¤„ï¼Œæ­¤å»ç»å¹´", "m": "ã€å…³é”®è¯ã€‘ç»å¹´ã€è™šè®¾ã€æ™“é£æ®‹æœˆã€‚" }
        ]
    },
    {
        "year": "2024",
        "qs": [
            { "t": "1. éªéª¥ä¸€è·ƒï¼Œä¸èƒ½åæ­¥ï¼›________________ï¼ŒåŠŸåœ¨ä¸èˆã€‚é”²è€Œèˆä¹‹ï¼Œæœ½æœ¨ä¸æŠ˜ï¼›é”²è€Œä¸èˆï¼Œ________________ã€‚", "a": "é©½é©¬åé©¾ï¼Œé‡‘çŸ³å¯é•‚", "m": "ã€å¯¹æ¯”æ³•ã€‘éªéª¥vsé©½é©¬ï¼Œæœ½æœ¨vsé‡‘çŸ³ã€‚" },
            { "t": "2. æˆ·åº­æ— å°˜æ‚ï¼Œè™šå®¤æœ‰ä½™é—²ã€‚________________ï¼Œ________________ã€‚", "a": "ä¹…åœ¨æ¨Šç¬¼é‡Œï¼Œå¤å¾—è¿”è‡ªç„¶", "m": "ã€æ„è±¡ã€‘æ¨Šç¬¼=å®˜åœºï¼Œè‡ªç„¶=ç”°å›­ã€‚" },
            { "t": "3. æˆ‘é—»çµç¶å·²å¹æ¯ï¼Œåˆé—»æ­¤è¯­é‡å”§å”§ã€‚________________ï¼Œ________________ï¼", "a": "åŒæ˜¯å¤©æ¶¯æ²¦è½äººï¼Œç›¸é€¢ä½•å¿…æ›¾ç›¸è¯†", "m": "ã€å…±é¸£ã€‘æ²¦è½äººç›¸é‡ï¼Œä¸éœ€æ—§è¯†ã€‚" },
            { "t": "4. ________________ï¼Œä¸€å¼¦ä¸€æŸ±æ€åå¹´ã€‚åº„ç”Ÿæ™“æ¢¦è¿·è´è¶ï¼Œæœ›å¸æ˜¥å¿ƒæ‰˜æœé¹ƒã€‚", "a": "é”¦ç‘Ÿæ— ç«¯äº”åå¼¦", "m": "ã€é¦–å¥ã€‘äº”åå¼¦å¯¹åº”ä¸€å¼¦ä¸€æŸ±ã€‚" }
        ]
    },
    {
        "year": "2023",
        "qs": [
            { "t": "1. ç§¯åœŸæˆå±±ï¼Œé£é›¨å…´ç„‰ï¼›________________ï¼Œè›Ÿé¾™ç”Ÿç„‰ã€‚", "a": "ç§¯æ°´æˆæ¸Š", "m": "ã€ç§¯ç´¯ã€‘åœŸ->å±±ï¼Œæ°´->æ¸Šã€‚" },
            { "t": "2. å±±ä¸åŒé«˜ï¼Œ________________ã€‚å‘¨å…¬åå“ºï¼Œå¤©ä¸‹å½’å¿ƒã€‚", "a": "æµ·ä¸åŒæ·±", "m": "ã€èƒ¸æ€€ã€‘å±±ä¸åŒé«˜ï¼Œæµ·ä¸åŒæ·±ã€‚" },
            { "t": "3. æ•…å›½ç¥æ¸¸ï¼Œå¤šæƒ…åº”ç¬‘æˆ‘ï¼Œæ—©ç”Ÿåå‘ã€‚________________ï¼Œ________________ã€‚", "a": "äººç”Ÿå¦‚æ¢¦ï¼Œä¸€å°Šè¿˜é…¹æ±Ÿæœˆ", "m": "ã€å¿ƒæ€ã€‘äººç”Ÿå¦‚æ¢¦ï¼Œæ•¬æ±Ÿæœˆä¸€æ¯é…’ã€‚" },
            { "t": "4. æ—©å²é‚£çŸ¥ä¸–äº‹è‰°ï¼Œä¸­åŸåŒ—æœ›æ°”å¦‚å±±ã€‚________________ï¼Œ________________ã€‚", "a": "æ¥¼èˆ¹å¤œé›ªç“œæ´²æ¸¡ï¼Œé“é©¬ç§‹é£å¤§æ•£å…³", "m": "ã€åœ°åã€‘ç“œæ´²æ¸¡å¯¹å¤§æ•£å…³ã€‚" }
        ]
    },
    {
        "year": "2022",
        "qs": [
            { "t": "1. é•¿é£ç ´æµªä¼šæœ‰æ—¶ï¼Œ________________ã€‚", "a": "ç›´æŒ‚äº‘å¸†æµæ²§æµ·", "m": "ã€å¿—å‘ã€‘ç ´æµª->æŒ‚å¸†->æµæ²§æµ·ã€‚" },
            { "t": "2. å¤šæƒ…è‡ªå¤ä¼¤ç¦»åˆ«ï¼Œæ›´é‚£å ªå†·è½æ¸…ç§‹èŠ‚ï¼________________ï¼Œ________________ï¼Ÿ", "a": "ä»Šå®µé…’é†’ä½•å¤„ï¼Œæ¨æŸ³å²¸ï¼Œæ™“é£æ®‹æœˆ", "m": "ã€å‡„æ™¯ã€‘é…’é†’æ‰€è§ï¼šæ¨æŸ³ã€é£ã€æ®‹æœˆã€‚" },
            { "t": "3. çœ‹ä¸‡å±±çº¢éï¼Œå±‚æ—å°½æŸ“ï¼Œ________________ï¼Œ________________ã€‚", "a": "æ¼«æ±Ÿç¢§é€ï¼Œç™¾èˆ¸äº‰æµ", "m": "ã€è‰²å½©/åŠ¨é™ã€‘çº¢æ—vsç¢§æ°´ï¼Œé™å±±vsåŠ¨èˆ¹ã€‚" },
            { "t": "4. å…­å›½ç ´ç­ï¼Œ________________ï¼Œæˆ˜ä¸å–„ï¼Œ________________ã€‚", "a": "éå…µä¸åˆ©ï¼Œå¼Šåœ¨èµ‚ç§¦", "m": "ã€è®ºç‚¹ã€‘éå…µä¸åˆ©ï¼Œåœ¨äºèµ‚ç§¦ã€‚" }
        ]
    },
    {
        "year": "2021",
        "qs": [
            { "t": "1. å…³å…³é›é¸ ï¼Œåœ¨æ²³ä¹‹æ´²ã€‚________________ï¼Œ________________ã€‚", "a": "çªˆçª•æ·‘å¥³ï¼Œå›å­å¥½é€‘", "m": "ã€ç»å…¸ã€‘æ·‘å¥³é…å›å­ã€‚" },
            { "t": "2. ________________ã€‚æœ€çˆ±æ¹–ä¸œè¡Œä¸è¶³ï¼Œç»¿æ¨é˜´é‡Œç™½æ²™å ¤ã€‚", "a": "ä¹±èŠ±æ¸æ¬²è¿·äººçœ¼", "m": "ã€è§†è§‰ã€‘èŠ±è®©äººçœ¼èŠ±ç¼­ä¹±ã€‚" },
            { "t": "3. äºˆè§‚å¤«å·´é™µèƒœçŠ¶ï¼Œåœ¨æ´åº­ä¸€æ¹–ã€‚________________ï¼Œåé•¿æ±Ÿï¼Œ________________ï¼Œæ¨ªæ— é™…æ¶¯ã€‚", "a": "è¡”è¿œå±±ï¼Œæµ©æµ©æ±¤æ±¤", "m": "ã€æ°”åŠ¿ã€‘è¡”å±±åæ±Ÿï¼Œæµ©æµ©æ±¤æ±¤ã€‚" },
            { "t": "4. ________________ã€‚æ­¤äº‹å¤éš¾å…¨ã€‚", "a": "äººæœ‰æ‚²æ¬¢ç¦»åˆï¼Œæœˆæœ‰é˜´æ™´åœ†ç¼º", "m": "ã€è§„å¾‹ã€‘äººå¯¹åº”æœˆï¼Œç¦»åˆå¯¹åº”åœ†ç¼ºã€‚" }
        ]
    },
    {
        "year": "2020",
        "qs": [
            { "t": "1. ________________ï¼Œ________________ã€‚çªˆçª•æ·‘å¥³ï¼Œå›å­å¥½é€‘ã€‚", "a": "å…³å…³é›é¸ ï¼Œåœ¨æ²³ä¹‹æ´²", "m": "ã€èµ·å…´ã€‘é›é¸ é¸Ÿåœ¨æ²³æ´²é¸£å«ã€‚" },
            { "t": "2. å†°æ³‰å†·æ¶©å¼¦å‡ç»ï¼Œå‡ç»ä¸é€šå£°æ¸æ­‡ï¼Œ________________ï¼Œ________________ã€‚", "a": "åˆ«æœ‰å¹½æ„æš—æ¨ç”Ÿï¼Œæ­¤æ—¶æ— å£°èƒœæœ‰å£°", "m": "ã€æ— å£°ä¹‹ç¾ã€‘æ— å£°èƒœæœ‰å£°ã€‚" },
            { "t": "3. äºˆè°“èŠï¼Œ________________ï¼›ç‰¡ä¸¹ï¼ŒèŠ±ä¹‹å¯Œè´µè€…ä¹Ÿï¼›è²ï¼Œ________________ã€‚", "a": "èŠ±ä¹‹éšé€¸è€…ä¹Ÿï¼ŒèŠ±ä¹‹å›å­è€…ä¹Ÿ", "m": "ã€è±¡å¾ã€‘èŠ=éšé€¸ï¼Œè²=å›å­ã€‚" },
            { "t": "4. å‡­è°é—®ï¼Œ________________ï¼Œ________________ã€‚", "a": "å»‰é¢‡è€çŸ£ï¼Œå°šèƒ½é¥­å¦", "m": "ã€å…¸æ•…ã€‘å»‰é¢‡è¿˜èƒ½åƒé¥­æ‰“ä»—å—ã€‚" }
        ]
    },
    {
        "year": "2019",
        "qs": [
            { "t": "1. ________________ï¼Œå°†ç™»å¤ªè¡Œé›ªæ»¡å±±ã€‚________________ï¼Œå¿½å¤ä¹˜èˆŸæ¢¦æ—¥è¾¹ã€‚", "a": "æ¬²æ¸¡é»„æ²³å†°å¡å·ï¼Œé—²æ¥å‚é’“ç¢§æºªä¸Š", "m": "ã€è¡Œè·¯éš¾ã€‘å†°å¡å·ï¼Œé›ªæ»¡å±±ã€‚" },
            { "t": "2. æ˜¯æ•…å¼Ÿå­ä¸å¿…ä¸å¦‚å¸ˆï¼Œå¸ˆä¸å¿…è´¤äºå¼Ÿå­ï¼Œé—»é“æœ‰å…ˆåï¼Œ________________ï¼Œå¦‚æ˜¯è€Œå·²ã€‚", "a": "æœ¯ä¸šæœ‰ä¸“æ”»", "m": "ã€å¸ˆé“ã€‘å„æœ‰æ‰€é•¿ã€‚" },
            { "t": "3. ________________ï¼Œ________________ï¼Œåˆ™èƒœè´Ÿä¹‹æ•°ï¼Œå­˜äº¡ä¹‹ç†ï¼Œå½“ä¸ç§¦ç›¸è¾ƒï¼Œæˆ–æœªæ˜“é‡ã€‚", "a": "åˆºå®¢ä¸è¡Œï¼Œè‰¯å°†çŠ¹åœ¨", "m": "ã€å‡è®¾ã€‘åˆºå®¢ä¸å»ï¼Œè‰¯å°†è¿˜åœ¨ã€‚" },
            { "t": "4. å¯å ªå›é¦–ï¼Œ________________ï¼Œä¸€ç‰‡ç¥é¸¦ç¤¾é¼“ã€‚", "a": "ä½›ç‹¸ç¥ ä¸‹", "m": "ã€åœºæ™¯ã€‘ä½›ç‹¸ç¥ ä¸‹ç¥­ç¥€å¿™ã€‚" }
        ]
    },
    {
        "year": "2018",
        "qs": [
            { "t": "1. æ•…ä¸ç§¯è·¬æ­¥ï¼Œ________________ï¼›ä¸ç§¯å°æµï¼Œ________________ã€‚", "a": "æ— ä»¥è‡³åƒé‡Œï¼Œæ— ä»¥æˆæ±Ÿæµ·", "m": "ã€ç§¯ç´¯ã€‘è·¬æ­¥->åƒé‡Œï¼Œå°æµ->æ±Ÿæµ·ã€‚" },
            { "t": "2. ________________ï¼Œè°å®¶æ–°ç‡•å•„æ˜¥æ³¥ã€‚ä¹±èŠ±æ¸æ¬²è¿·äººçœ¼ï¼Œ________________ã€‚", "a": "å‡ å¤„æ—©èºäº‰æš–æ ‘ï¼Œæµ…è‰æ‰èƒ½æ²¡é©¬è¹„", "m": "ã€æ—©æ˜¥ã€‘æ—©èºäº‰æ ‘ï¼Œæµ…è‰æ²¡è¹„ã€‚" },
            { "t": "3. æ‰§æ‰‹ç›¸çœ‹æ³ªçœ¼ï¼Œ________________ã€‚å¿µå»å»ï¼Œåƒé‡ŒçƒŸæ³¢ï¼Œ________________ã€‚", "a": "ç«Ÿæ— è¯­å‡å™ï¼Œæš®éœ­æ²‰æ²‰æ¥šå¤©é˜”", "m": "ã€ç¦»åˆ«ã€‘æ— è¯­å‡å™ï¼Œæš®éœ­æ²‰æ²‰ã€‚" },
            { "t": "4. æ–œé˜³è‰æ ‘ï¼Œ________________ï¼Œäººé“å¯„å¥´æ›¾ä½ã€‚æƒ³å½“å¹´ï¼Œ________________ï¼Œæ°”åä¸‡é‡Œå¦‚è™ã€‚", "a": "å¯»å¸¸å··é™Œï¼Œé‡‘æˆˆé“é©¬", "m": "ã€æ€€å¤ã€‘å··é™Œæ›¾ä½å¸ç‹ï¼Œå½“å¹´é‡‘æˆˆé“é©¬ã€‚" }
        ]
    },
    {
        "year": "2017",
        "qs": [
            { "t": "1. å›½ç ´å±±æ²³åœ¨ï¼ŒåŸæ˜¥è‰æœ¨æ·±ã€‚________________ï¼Œ________________ã€‚", "a": "æ„Ÿæ—¶èŠ±æº…æ³ªï¼Œæ¨åˆ«é¸ŸæƒŠå¿ƒ", "m": "ã€æ‹Ÿäººã€‘èŠ±æº…æ³ªï¼Œé¸ŸæƒŠå¿ƒã€‚" },
            { "t": "2. æ˜¯æ•…å¼Ÿå­ä¸å¿…ä¸å¦‚å¸ˆï¼Œ________________ï¼Œé—»é“æœ‰å…ˆåï¼Œ________________ï¼Œå¦‚æ˜¯è€Œå·²ã€‚", "a": "å¸ˆä¸å¿…è´¤äºå¼Ÿå­ï¼Œæœ¯ä¸šæœ‰ä¸“æ”»", "m": "ã€è¾©è¯ã€‘å¸ˆç”Ÿå…³ç³»è¾©è¯çœ‹ã€‚" },
            { "t": "3. è‹”ç—•ä¸Šé˜¶ç»¿ï¼Œè‰è‰²å…¥å¸˜é’ã€‚________________ï¼Œ________________ã€‚", "a": "è°ˆç¬‘æœ‰é¸¿å„’ï¼Œå¾€æ¥æ— ç™½ä¸", "m": "ã€å¾€æ¥ã€‘é¸¿å„’vsç™½ä¸ã€‚" },
            { "t": "4. ________________ï¼Œ________________ï¼Œå·èµ·åƒå †é›ªã€‚", "a": "ä¹±çŸ³ç©¿ç©ºï¼ŒæƒŠæ¶›æ‹å²¸", "m": "ã€æ°”åŠ¿ã€‘ä¹±çŸ³ç©¿ç©ºï¼ŒæƒŠæ¶›æ‹å²¸ã€‚" }
        ]
    },
    {
        "year": "2016",
        "qs": [
            { "t": "1. ________________ï¼Œ________________ã€‚ä¸å›ç¦»åˆ«æ„ï¼ŒåŒæ˜¯å®¦æ¸¸äººã€‚", "a": "åŸé˜™è¾…ä¸‰ç§¦ï¼Œé£çƒŸæœ›äº”æ´¥", "m": "ã€åœ°åã€‘ä¸‰ç§¦vsäº”æ´¥ã€‚" },
            { "t": "2. æ˜¥èŠ±ç§‹æœˆä½•æ—¶äº†ï¼Œ________________ï¼Ÿå°æ¥¼æ˜¨å¤œåˆä¸œé£ï¼Œ________________ã€‚", "a": "å¾€äº‹çŸ¥å¤šå°‘ï¼Œæ•…å›½ä¸å ªå›é¦–æœˆæ˜ä¸­", "m": "ã€ä¼¤æ„Ÿã€‘å¾€äº‹çŸ¥å¤šå°‘ï¼Œä¸å ªå›é¦–ã€‚" },
            { "t": "3. äºˆç‹¬çˆ±è²ä¹‹å‡ºæ·¤æ³¥è€Œä¸æŸ“ï¼Œ________________ï¼Œä¸­é€šå¤–ç›´ï¼Œä¸è”“ä¸æï¼Œ________________ï¼Œäº­äº­å‡€æ¤ï¼Œå¯è¿œè§‚è€Œä¸å¯äºµç©ç„‰ã€‚", "a": "æ¿¯æ¸…æ¶Ÿè€Œä¸å¦–ï¼Œé¦™è¿œç›Šæ¸…", "m": "ã€å“è´¨ã€‘æ¸…æ¶Ÿä¸å¦–ï¼Œé¦™è¿œç›Šæ¸…ã€‚" },
            { "t": "4. æ¯è—¤è€æ ‘æ˜é¸¦ï¼Œ________________ã€‚å¤•é˜³è¥¿ä¸‹ï¼Œæ–­è‚ äººåœ¨å¤©æ¶¯ã€‚", "a": "å¤é“è¥¿é£ç˜¦é©¬", "m": "ã€æ„è±¡ã€‘ä¸‰ç»„åè¯ï¼šå¤é“ã€è¥¿é£ã€ç˜¦é©¬ã€‚" }
        ]
    },
    {
        "year": "2015",
        "qs": [
            { "t": "1. å¤ä¹‹åœ£äººï¼Œ________________ï¼Œ________________ã€‚", "a": "å…¶å‡ºäººä¹Ÿè¿œçŸ£ï¼ŒçŠ¹ä¸”ä»å¸ˆè€Œé—®ç„‰", "m": "ã€å¯¹æ¯”ã€‘åœ£äººä¹Ÿä»å¸ˆã€‚" },
            { "t": "2. ________________ï¼Œå¤œæ³Šç§¦æ·®è¿‘é…’å®¶ã€‚å•†å¥³ä¸çŸ¥äº¡å›½æ¨ï¼Œ________________ã€‚", "a": "çƒŸç¬¼å¯’æ°´æœˆç¬¼æ²™ï¼Œéš”æ±ŸçŠ¹å”±ååº­èŠ±", "m": "ã€è®½åˆºã€‘çƒŸæœˆç¬¼ç½©ï¼ŒçŠ¹å”±äº¡å›½æ›²ã€‚" },
            { "t": "3. æ™“é•œä½†æ„äº‘é¬“æ”¹ï¼Œ________________ã€‚è“¬å±±æ­¤å»æ— å¤šè·¯ï¼Œ________________ã€‚", "a": "å¤œåŸåº”è§‰æœˆå…‰å¯’ï¼Œé’é¸Ÿæ®·å‹¤ä¸ºæ¢çœ‹", "m": "ã€æ€å¿µã€‘å¤œåŸæœˆå¯’ï¼Œé’é¸Ÿæ¢çœ‹ã€‚" },
            { "t": "4. ç™»æ–¯æ¥¼ä¹Ÿï¼Œåˆ™æœ‰å¿ƒæ—·ç¥æ€¡ï¼Œ________________ï¼ŒæŠŠé…’ä¸´é£ï¼Œ________________ã€‚", "a": "å® è¾±å•å¿˜ï¼Œå…¶å–œæ´‹æ´‹è€…çŸ£", "m": "ã€å–œæ‚¦ã€‘å® è¾±çš†å¿˜ï¼Œå–œæ´‹æ´‹ã€‚" }
        ]
    },
    {
        "year": "2014",
        "qs": [
            { "t": "1. ________________ï¼Œ________________ï¼Œå›å­åšå­¦è€Œæ—¥å‚çœä¹å·±ï¼Œåˆ™çŸ¥æ˜è€Œè¡Œæ— è¿‡çŸ£ã€‚", "a": "æ•…æœ¨å—ç»³åˆ™ç›´ï¼Œé‡‘å°±ç ºåˆ™åˆ©", "m": "ã€æ¯”å–»ã€‘æœ¨å—ç»³ï¼Œé‡‘å°±ç ºã€‚" },
            { "t": "2. å¸ƒè¡¾å¤šå¹´å†·ä¼¼é“ï¼Œ________________ã€‚åºŠå¤´å±‹æ¼æ— å¹²å¤„ï¼Œ________________ã€‚", "a": "éª„å„¿æ¶å§è¸é‡Œè£‚ï¼Œé›¨è„šå¦‚éº»æœªæ–­ç»", "m": "ã€å›°è‹¦ã€‘è¸é‡Œè£‚ï¼Œé›¨å¦‚éº»ã€‚" },
            { "t": "3. å†°æ³‰å†·æ¶©å¼¦å‡ç»ï¼Œ________________ã€‚åˆ«æœ‰å¹½æ„æš—æ¨ç”Ÿï¼Œ________________ã€‚", "a": "å‡ç»ä¸é€šå£°æ¸æ­‡ï¼Œæ­¤æ—¶æ— å£°èƒœæœ‰å£°", "m": "ã€é¡¿æŒ«ã€‘å£°æ¸æ­‡ï¼Œèƒœæœ‰å£°ã€‚" },
            { "t": "4. äºˆè°“èŠï¼ŒèŠ±ä¹‹éšé€¸è€…ä¹Ÿï¼›ç‰¡ä¸¹ï¼Œ________________ï¼›è²ï¼Œ________________ã€‚", "a": "èŠ±ä¹‹å¯Œè´µè€…ä¹Ÿï¼ŒèŠ±ä¹‹å›å­è€…ä¹Ÿ", "m": "ã€èŠ±è¯­ã€‘ç‰¡ä¸¹å¯Œè´µï¼Œè²èŠ±å›å­ã€‚" }
        ]
    },
    {
        "year": "2013",
        "qs": [
            { "t": "1. ________________ï¼Œåœ¨æ²³ä¹‹æ´²ã€‚________________ï¼Œå›å­å¥½é€‘ã€‚", "a": "å…³å…³é›é¸ ï¼Œçªˆçª•æ·‘å¥³", "m": "ã€é¦–å¥ã€‘å…³å…³é›é¸ ã€‚" },
            { "t": "2. è‹”ç—•ä¸Šé˜¶ç»¿ï¼Œ________________ï¼›________________ï¼Œè°ˆç¬‘æœ‰é¸¿å„’ã€‚", "a": "è‰è‰²å…¥å¸˜é’ï¼Œå¾€æ¥æ— ç™½ä¸", "m": "ã€é™‹å®¤ã€‘è‰å…¥å¸˜ï¼Œæ— ç™½ä¸ã€‚" },
            { "t": "3. ________________ï¼Œè«ä½¿é‡‘æ¨½ç©ºå¯¹æœˆã€‚________________ï¼Œåƒé‡‘æ•£å°½è¿˜å¤æ¥ã€‚", "a": "äººç”Ÿå¾—æ„é¡»å°½æ¬¢ï¼Œå¤©ç”Ÿæˆ‘æå¿…æœ‰ç”¨", "m": "ã€è±ªè¿ˆã€‘é¡»å°½æ¬¢ï¼Œå¿…æœ‰ç”¨ã€‚" },
            { "t": "4. æ¯è—¤è€æ ‘æ˜é¸¦ï¼Œ________________ã€‚å¤é“è¥¿é£ç˜¦é©¬ï¼Œ________________ï¼Œæ–­è‚ äººåœ¨å¤©æ¶¯ã€‚", "a": "å°æ¡¥æµæ°´äººå®¶ï¼Œå¤•é˜³è¥¿ä¸‹", "m": "ã€æ™¯è‰²ã€‘å°æ¡¥æµæ°´ï¼Œå¤•é˜³è¥¿ä¸‹ã€‚" }
        ]
    },
    {
        "year": "2012",
        "qs": [
            { "t": "1. ä»¥åœ°äº‹ç§¦ï¼Œ________________ï¼Œè–ªä¸å°½ï¼Œ________________ã€‚", "a": "çŠ¹æŠ±è–ªæ•‘ç«ï¼Œç«ä¸ç­", "m": "ã€æˆè¯­ã€‘æŠ±è–ªæ•‘ç«ã€‚" },
            { "t": "2. å¤§å¼¦å˜ˆå˜ˆå¦‚æ€¥é›¨ï¼Œ________________ã€‚å˜ˆå˜ˆåˆ‡åˆ‡é”™æ‚å¼¹ï¼Œ________________ã€‚", "a": "å°å¼¦åˆ‡åˆ‡å¦‚ç§è¯­ï¼Œå¤§ç å°ç è½ç‰ç›˜", "m": "ã€éŸ³ä¹ã€‘å¦‚ç§è¯­ï¼Œè½ç‰ç›˜ã€‚" },
            { "t": "3. ç™»æ–¯æ¥¼ä¹Ÿï¼Œåˆ™æœ‰å»å›½æ€€ä¹¡ï¼Œ________________ï¼Œ________________ï¼Œæ„Ÿæè€Œæ‚²è€…çŸ£ã€‚", "a": "å¿§è°—ç•è®¥ï¼Œæ»¡ç›®è§ç„¶", "m": "ã€æ‚²æƒ…ã€‘å¿§è°—ç•è®¥ï¼Œæ»¡ç›®è§ç„¶ã€‚" },
            { "t": "4. åƒå¤æ±Ÿå±±ï¼Œ________________ã€‚èˆæ¦­æ­Œå°ï¼Œ________________ã€‚", "a": "è‹±é›„æ— è§…å­™ä»²è°‹å¤„ï¼Œé£æµæ€»è¢«é›¨æ‰“é£å¹å»", "m": "ã€æ€€å¤ã€‘è‹±é›„æ— è§…ï¼Œé£æµè¢«å¹å»ã€‚" }
        ]
    },
    {
        "year": "2011",
        "qs": [
            { "t": "1. é”²è€Œèˆä¹‹ï¼Œ________________ï¼›é”²è€Œä¸èˆï¼Œ________________ã€‚", "a": "æœ½æœ¨ä¸æŠ˜ï¼Œé‡‘çŸ³å¯é•‚", "m": "ã€åšæŒã€‘èˆä¹‹ä¸æŠ˜ï¼Œä¸èˆå¯é•‚ã€‚" },
            { "t": "2. å®‰å¾—å¹¿å¦åƒä¸‡é—´ï¼Œ________________ï¼", "a": "å¤§åº‡å¤©ä¸‹å¯’å£«ä¿±æ¬¢é¢œ", "m": "ã€å®æ„¿ã€‘åº‡æŠ¤å¯’å£«ã€‚" },
            { "t": "3. ç„¶åˆ™ä½•æ—¶è€Œä¹è€¶ï¼Ÿå…¶å¿…æ›°â€œ________________ï¼Œ________________â€ä¹ï¼", "a": "å…ˆå¤©ä¸‹ä¹‹å¿§è€Œå¿§ï¼Œåå¤©ä¸‹ä¹‹ä¹è€Œä¹", "m": "ã€åå¥ã€‘å…ˆå¿§åä¹ã€‚" },
            { "t": "4. æ­¤å»ç»å¹´ï¼Œ________________ã€‚ä¾¿çºµæœ‰åƒç§é£æƒ…ï¼Œæ›´ä¸ä½•äººè¯´ï¼", "a": "åº”æ˜¯è‰¯è¾°å¥½æ™¯è™šè®¾", "m": "ã€è™šè®¾ã€‘è‰¯è¾°å¥½æ™¯è™šè®¾ã€‚" }
        ]
    },
    {
        "year": "2010",
        "qs": [
            { "t": "1. å…³å…³é›é¸ ï¼Œ________________ã€‚", "a": "åœ¨æ²³ä¹‹æ´²", "m": "ã€ä¸‹å¥ã€‘åœ¨æ²³ä¹‹æ´²ã€‚" },
            { "t": "2. åœ£äººä¹‹æ‰€ä»¥ä¸ºåœ£ï¼Œ________________ã€‚çš†å‡ºäºæ­¤ä¹ï¼Ÿçˆ±å…¶å­ï¼Œ________________ï¼›äºå…¶èº«ä¹Ÿï¼Œåˆ™è€»èº¬ç„‰ï¼Œæƒ‘çŸ£ã€‚", "a": "æ„šäººä¹‹æ‰€ä»¥ä¸ºæ„šï¼Œæ‹©å¸ˆè€Œæ•™ä¹‹", "m": "ã€æ„šæ™ºã€‘æ„šäººæ‰€ä»¥æ„šï¼Œæ‹©å¸ˆæ•™ä¹‹ã€‚" },
            { "t": "3. ä¹±èŠ±æ¸æ¬²è¿·äººçœ¼ï¼Œ________________ã€‚æœ€çˆ±æ¹–ä¸œè¡Œä¸è¶³ï¼Œ________________ã€‚", "a": "æµ…è‰æ‰èƒ½æ²¡é©¬è¹„ï¼Œç»¿æ¨é˜´é‡Œç™½æ²™å ¤", "m": "ã€æ˜¥æ¸¸ã€‘æµ…è‰æ²¡è¹„ï¼Œç»¿æ¨æ²™å ¤ã€‚" },
            { "t": "4. ________________ï¼Œå°æ¡¥æµæ°´äººå®¶ï¼Œ________________ã€‚å¤•é˜³è¥¿ä¸‹ï¼Œæ–­è‚ äººåœ¨å¤©æ¶¯ã€‚", "a": "æ¯è—¤è€æ ‘æ˜é¸¦ï¼Œå¤é“è¥¿é£ç˜¦é©¬", "m": "ã€ç§‹æ€ã€‘ä¹ä¸ªæ„è±¡ã€‚" }
        ]
    },
    {
        "year": "2009",
        "qs": [
            { "t": "1. å›ä¸è§é»„æ²³ä¹‹æ°´å¤©ä¸Šæ¥ï¼Œ________________ã€‚å›ä¸è§é«˜å ‚æ˜é•œæ‚²ç™½å‘ï¼Œ________________ã€‚", "a": "å¥”æµåˆ°æµ·ä¸å¤å›ï¼Œæœå¦‚é’ä¸æš®æˆé›ª", "m": "ã€å¤¸å¼ ã€‘ä¸å¤å›ï¼Œæš®æˆé›ªã€‚" },
            { "t": "2. å…­å›½ç ´ç­ï¼Œ________________ï¼Œ________________ã€‚å¼Šåœ¨èµ‚ç§¦ã€‚", "a": "éå…µä¸åˆ©ï¼Œæˆ˜ä¸å–„", "m": "ã€å½’å› ã€‘éå…µä¸åˆ©ï¼Œæˆ˜ä¸å–„ã€‚" },
            { "t": "3. æ•…å›½ç¥æ¸¸ï¼Œ________________ï¼Œæ—©ç”Ÿåå‘ã€‚äººç”Ÿå¦‚æ¢¦ï¼Œ________________ã€‚", "a": "å¤šæƒ…åº”ç¬‘æˆ‘ï¼Œä¸€å°Šè¿˜é…¹æ±Ÿæœˆ", "m": "ã€è‡ªå˜²ã€‘å¤šæƒ…ç¬‘æˆ‘ï¼Œé…¹æ±Ÿæœˆã€‚" },
            { "t": "4. çœ‹ä¸‡å±±çº¢éï¼Œ________________ï¼›æ¼«æ±Ÿç¢§é€ï¼Œ________________ã€‚", "a": "å±‚æ—å°½æŸ“ï¼Œç™¾èˆ¸äº‰æµ", "m": "ã€æ²å›­æ˜¥ã€‘å±‚æ—å°½æŸ“ï¼Œç™¾èˆ¸äº‰æµã€‚" }
        ]
    },
    {
        "year": "2008",
        "qs": [
            { "t": "1. é›•æ ç‰ç Œåº”çŠ¹åœ¨ï¼Œåªæ˜¯æœ±é¢œæ”¹ã€‚é—®å›èƒ½æœ‰å‡ å¤šæ„ï¼Œ________________ã€‚", "a": "æ°ä¼¼ä¸€æ±Ÿæ˜¥æ°´å‘ä¸œæµ", "m": "ã€æ„ç»ªã€‘ä¼¼æ˜¥æ°´ä¸œæµã€‚" },
            { "t": "2. å»æ¥æ±Ÿå£å®ˆç©ºèˆ¹ï¼Œ________________ã€‚å¤œæ·±å¿½æ¢¦å°‘å¹´äº‹ï¼Œ________________ã€‚", "a": "ç»•èˆ¹æœˆæ˜æ±Ÿæ°´å¯’ï¼Œæ¢¦å•¼å¦†æ³ªçº¢é˜‘å¹²", "m": "ã€å‡„æ¸…ã€‘æ±Ÿæ°´å¯’ï¼Œçº¢é˜‘å¹²ã€‚" },
            { "t": "3. æ˜¯æ•…æ— è´µæ— è´±ï¼Œæ— é•¿æ— å°‘ï¼Œ________________ï¼Œ________________ã€‚", "a": "é“ä¹‹æ‰€å­˜ï¼Œå¸ˆä¹‹æ‰€å­˜ä¹Ÿ", "m": "ã€æ‹©å¸ˆã€‘é“ä¹‹æ‰€å­˜ï¼Œå¸ˆä¹‹æ‰€å­˜ã€‚" },
            { "t": "4. åƒå¤æ±Ÿå±±ï¼Œ________________ã€‚èˆæ¦­æ­Œå°ï¼Œ________________ã€‚", "a": "è‹±é›„æ— è§…å­™ä»²è°‹å¤„ï¼Œé£æµæ€»è¢«é›¨æ‰“é£å¹å»", "m": "ã€æ¶ˆé€ã€‘è‹±é›„æ— è§…ï¼Œé£æµé›¨æ‰“é£å¹ã€‚" }
        ]
    }
];

let currentLevelIndex = 0;
let userMeta = { name: "", id: "", class: "" };

function startGame() {
    const classInput = document.getElementById('className').value.trim();
    const idInput = document.getElementById('studentId').value.trim();
    const nameInput = document.getElementById('studentName').value.trim();

    if(!classInput || !idInput || !nameInput) {
        alert("è¯·å®Œæ•´å¡«å†™ç­çº§ã€å­¦å·å’Œå§“åï¼Œä»¥ä¾¿è®°å½•æˆç»©ï¼");
        return;
    }

    userMeta = { class: classInput, id: idInput, name: nameInput };
    
    document.getElementById('setup-section').classList.remove('active');
    document.getElementById('game-section').classList.add('active');
    loadLevel();
}

function loadLevel() {
    const levelData = fullDatabase[currentLevelIndex];
    document.getElementById('level-title').innerText = `ç¬¬ ${currentLevelIndex + 1} å…³ï¼š${levelData.year}å¹´çœŸé¢˜`;
    document.getElementById('level-progress').innerText = `${currentLevelIndex + 1}/${fullDatabase.length}`;
    document.getElementById('progress-fill').style.width = `${((currentLevelIndex)/fullDatabase.length)*100}%`;
    
    const area = document.getElementById('questions-area');
    area.innerHTML = "";

    levelData.qs.forEach((q, idx) => {
        let answerParts = q.a.split('ï¼Œ');
        let partIndex = 0;
        
        // æ›¿æ¢ä¸‹åˆ’çº¿ä¸ºè¾“å…¥æ¡†
        const htmlText = q.t.replace(/_+/g, () => {
            const currentPartAns = answerParts[partIndex] ? answerParts[partIndex].trim() : "";
            const inputHtml = `<input type="text" 
                class="inline-input" 
                data-group="q-${idx}" 
                data-ans="${currentPartAns}" 
                autocomplete="off"
                onkeydown="if(event.keyCode==13) document.getElementById('btn-confirm-${idx}').click()">`;
            partIndex++;
            return inputHtml;
        });

        // ç”Ÿæˆå¡ç‰‡ HTML
        area.innerHTML += `
            <div class="question-card" id="card-${idx}">
                <div class="question-text">${htmlText}</div>
                
                <button class="btn-confirm-q" id="btn-confirm-${idx}" onclick="confirmQuestion(${idx})">ç¡®è®¤ç­”æ¡ˆ</button>

                <div id="analysis-${idx}" class="analysis-box">
                    <div class="correct-answer-text">âœ… æ­£ç¡®ç­”æ¡ˆï¼š${q.a}</div>
                    <div class="memory-tip">ğŸ’¡ è®°å¿†é”¦å›Šï¼š${q.m}</div>
                </div>
            </div>
        `;
    });

    // æŒ‰é’®çŠ¶æ€é‡ç½®
    document.getElementById('submit-level-btn').style.display = 'inline-block';
    document.getElementById('submit-level-btn').innerText = 'ç»“ç®—æœ¬å…³æˆç»©';
    document.getElementById('next-btn').style.display = 'none';
    document.getElementById('redo-btn').style.display = 'none';
    window.scrollTo(0,0);
}

// æ ¸å¿ƒåŠŸèƒ½ï¼šå•é¢˜ç¡®è®¤é€»è¾‘
function confirmQuestion(idx) {
    const inputs = document.querySelectorAll(`input[data-group='q-${idx}']`);
    let isAllCorrect = true;
    let hasEmpty = false;

    // å…ˆæ£€æŸ¥ç©ºå€¼
    inputs.forEach(inp => {
        if(inp.value.trim() === "") hasEmpty = true;
    });

    if(hasEmpty) {
        if(!confirm("è¿™é“é¢˜è¿˜æœ‰ç©ºæ²¡å¡«ï¼Œç¡®å®šè¦æäº¤å—ï¼Ÿ")) return;
    }

    // æ ¡éªŒé€»è¾‘
    inputs.forEach(inp => {
        const userVal = inp.value.trim();
        const correctVal = inp.getAttribute('data-ans');
        
        // å®½æ¾åŒ¹é…ï¼šå»æ ‡ç‚¹
        const cleanUser = userVal.replace(/[ï¼Œã€‚ï¼Ÿï¼,.]/g, '');
        const cleanAns = correctVal.replace(/[ï¼Œã€‚ï¼Ÿï¼,.]/g, '');

        inp.disabled = true; // é”å®š

        if (cleanUser === cleanAns && cleanUser !== "") {
            inp.classList.add('correct');
        } else {
            inp.classList.add('wrong');
            isAllCorrect = false;
        }
    });

    // æ˜¾ç¤ºè§£æ
    document.getElementById(`analysis-${idx}`).style.display = 'block';
    
    // éšè—è¯¥é¢˜ç¡®è®¤æŒ‰é’®
    const btn = document.getElementById(`btn-confirm-${idx}`);
    btn.classList.add('checked');
    
    // å¦‚æœå…¨å¯¹ï¼Œå¡ç‰‡å¯ä»¥ç»™ä¸ªç»¿è‰²è¾¹æ¡†åé¦ˆ
    if(isAllCorrect) {
        document.getElementById(`card-${idx}`).style.border = "2px solid var(--primary)";
    } else {
        document.getElementById(`card-${idx}`).style.border = "2px solid var(--error)";
    }
}

function finishLevel() {
    // æ£€æŸ¥æ˜¯å¦æ‰€æœ‰é¢˜éƒ½å·²ç¡®è®¤ï¼Œå¦‚æœæ²¡æœ‰ï¼Œè‡ªåŠ¨è§¦å‘ç¡®è®¤
    const allConfirmBtns = document.querySelectorAll('.btn-confirm-q');
    allConfirmBtns.forEach(btn => {
        if(!btn.classList.contains('checked')) {
            btn.click(); // è‡ªåŠ¨ç‚¹å‡»æœªç‚¹å‡»çš„ç¡®è®¤æŒ‰é’®
        }
    });

    // è®¡ç®—æ€»åˆ†
    const inputs = document.querySelectorAll('.inline-input');
    let correctCount = 0;
    let totalCount = inputs.length;

    inputs.forEach(inp => {
        if(inp.classList.contains('correct')) correctCount++;
    });

    const score = Math.round((correctCount / totalCount) * 100);
    showResult(score);
}

function showResult(score) {
    const modal = document.getElementById('result-modal');
    const scoreEl = document.getElementById('score-val');
    const quoteEl = document.getElementById('quote-val');
    const userInfoEl = document.getElementById('modal-user-info');
    
    userInfoEl.innerText = `${userMeta.class} Â· ${userMeta.name}`;
    scoreEl.innerText = score;
    modal.style.display = 'flex';

    document.getElementById('submit-level-btn').style.display = 'none';

    if (score === 100) {
        quoteEl.innerText = "ğŸ‰ ç¬”è½æƒŠé£é›¨ï¼Œè¯—æˆæ³£é¬¼ç¥ï¼å®Œç¾ï¼";
        document.getElementById('next-btn').style.display = 'inline-block';
        
        if(currentLevelIndex === fullDatabase.length -1) {
             document.getElementById('next-btn').innerText = "ğŸ† å…¨å·é€šå…³ï¼";
             document.getElementById('next-btn').onclick = () => alert(`æ­å–œ ${userMeta.name} åŒå­¦åˆ¶éœ¸é«˜èŒé«˜è€ƒè¯­æ–‡é»˜å†™ï¼`);
        }
    } else if (score >= 80) {
        quoteEl.innerText = "ğŸ‘ æˆç»©ä¸é”™ï¼Œç»§ç»­ä¿æŒï¼";
        document.getElementById('next-btn').style.display = 'inline-block';
    } else {
        quoteEl.innerText = "ğŸ’ª é”²è€Œèˆä¹‹æœ½æœ¨ä¸æŠ˜ï¼Œå»ºè®®é‡åˆ·æœ¬å…³ï¼";
        document.getElementById('redo-btn').style.display = 'inline-block';
    }
}

function closeModal() {
    document.getElementById('result-modal').style.display = 'none';
}

function nextLevel() {
    if(currentLevelIndex < fullDatabase.length - 1) {
        currentLevelIndex++;
        loadLevel();
    }
}
</script>
</body>
</html>
